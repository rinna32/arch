{% extends "blogs/base.html" %}
{% load static %}

{% block content %}
<div class="landing-hero">
  <div class="hero-image">
  <img src="{% static 'blogs/main.jpg' %}" alt="Главная картинка">
</div>
  <div class="hero-text">
    <h1>Ваш блог — место для идей и вдохновения</h1>
    <p>Откройте для себя лучшие посты, делитесь мыслями и создавайте своё сообщество.</p>
    <a href="{% url 'blogs:new_post' %}" class="btn-main">Создать пост</a>
  </div>
</div>

<div class="feature-section">
  <div class="feature-text">
    <h2>Последние посты</h2>
    <p>Читайте свежие публикации и находите новых авторов.</p>
    <a href="{% url 'blogs:posts' %}" class="btn-secondary">Смотреть все посты</a>
  </div>
  <div class="feature-cards">
    {% for post in latest_posts %}
      <div class="card">
        {% if post.image %}
          <img src="{{ post.image.url }}" alt="{{ post.title }}">
        {% else %}
          <img src="{% static 'blogs/default.jpg' %}" alt="Default image">
        {% endif %}
        <h3>{{ post.title }}</h3>
        <p>{{ post.text|truncatechars:80 }}</p>
        <a href="{% url 'blogs:post' post.id %}" class="btn-link">Читать</a>
      </div>
    {% empty %}
      <p>Постов пока нет.</p>
    {% endfor %}
    {% if user.is_authenticated %}
  <h2>Последние посты</h2>
  {% if posts %}
    {% for post in posts %}
      <div class="col-md-6 col-lg-4 mb-4">
        <div class="card h-100 border-0 shadow-lg">
            <img src="https://source.unsplash.com/400x200/?nature,blog,writing&sig={{ forloop.counter }}" class="card-img-top" alt="Post image">
            <div class="card-body d-flex flex-column">
                <h5 class="card-title">{{ post.title }}</h5>
                <p class="card-text">{{ post.content|truncatewords:20 }}</p>
                {% if post.image %}
                    <img src="{{ post.image.url }}" class="card-img-top" alt="Post image">
                {% else %}
                    <img src="{% static 'images/default.jpg' %}" class="card-img-top" alt="Default image">
                {% endif %}
                
                <a href="{% url 'blogs:post' post.id %}" class="mt-auto btn btn-outline-primary">Читать далее</a>
            </div>
        </div>
    </div>
    {% endfor %}
  {% else %}
    <p>Постов пока нет.</p>
  {% endif %}
{% endif %}
  </div>
</div>

<div class="steps-section">
  <h2>Как начать?</h2>
  <div class="steps">
    <div class="step">
      <h4>Шаг 1</h4>
      <p>Зарегистрируйтесь или войдите в аккаунт.</p>
    </div>
    <div class="step">
      <h4>Шаг 2</h4>
      <p>Создайте свой первый пост или просмотрите публикации других.</p>
    </div>
    <div class="step">
      <h4>Шаг 3</h4>
      <p>Общайтесь, комментируйте и вдохновляйтесь!</p>
    </div>
  </div>
</div>

<div class="brands-section">
  <span>Наш блог рекомендуют:</span>
  <div class="brands">
    <img src="{% static 'blogs/brand2.jpg' %}" alt="Brand 1">
    <img src="{% static 'blogs/brand1.jpg' %}" alt="Brand 2">
    <img src="{% static 'blogs/brand3.jpg' %}" alt="Brand 3">
  </div>
</div>
{% endblock %}
